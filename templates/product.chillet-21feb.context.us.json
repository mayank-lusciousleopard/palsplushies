{
  "context": {
    "market": "us"
  },
  "parent": "product.chillet-21feb.json",
  "sections": {
    "main": {
      "settings": {},
      "blocks": {
        "variant_picker": {
          "disabled": true,
          "settings": {}
        },
        "custom_liquid_GVXRmY": {
          "settings": {
            "custom_liquid": "{% assign current_product = product | default: section.settings.product %}\n\n<div class=\"v7-unique-variant-container\" id=\"ProductUI-{{ section.id }}-{{ current_product.id }}\">\n\n  <div class=\"v7-unique-swatch-section\">\n    <label class=\"v7-unique-label\">Animals<\/label>\n    <div class=\"v7-unique-swatch-grid\">\n      {%- assign colors_seen = \"\" -%}\n      {% for variant in current_product.variants %}\n        {%- assign color_val = variant.options[0] -%}\n        {%- unless colors_seen contains color_val -%}\n          {%- assign colors_seen = colors_seen | append: color_val | append: \",\" -%}\n\n          {%- assign key = color_val | downcase -%}\n          {%- case key -%}\n            {%- when 'blue' -%}{% assign bg='#dbeafe' %}{% assign bdr='#3b82f6' %}\n            {%- when 'pink' -%}{% assign bg='#fde2e4' %}{% assign bdr='#ec4899' %}\n            {%- else -%}{% assign bg='#f8f8f8' %}{% assign bdr='#444' %}\n          {%- endcase -%}\n\n          <label class=\"v7-unique-card\">\n            <input type=\"radio\" name=\"swatch_color_v7\" value=\"{{ color_val | escape }}\" class=\"v7-unique-color-input\" data-bg=\"{{ bg }}\" \n              {% if current_product.selected_or_first_available_variant.options[0] == color_val %}checked{% endif %} hidden>\n            <div class=\"v7-unique-card-inner\" style=\"background: {{ bg }}; --v7-border: {{ bdr }};\">\n              <img src=\"{{ variant.featured_media | default: current_product.featured_media | image_url: width: 250 }}\" loading=\"lazy\">\n              <div class=\"v7-unique-info\">\n                <div class=\"v7-unique-title\">{{ color_val | upcase }}<\/div>\n                <div class=\"v7-unique-pill\" data-v7-swatch-color=\"{{ color_val | escape }}\">{{ variant.price | money }}<\/div>\n              <\/div>\n            <\/div>\n          <\/label>\n        {%- endunless -%}\n      {% endfor %}\n    <\/div>\n  <\/div>\n\n  <div class=\"v7-unique-size-section\">\n    <label class=\"v7-unique-label\">Size<\/label>\n    <div class=\"v7-unique-select-wrapper\">\n      <select class=\"v7-unique-dropdown\">\n        {%- assign variants_list = \"\" -%}\n        {% for variant in current_product.variants %}\n          {%- capture var_key -%}{{ variant.options[0] }}|{{ variant.options[1] }}{%- endcapture -%}\n          {%- unless variants_list contains var_key -%}\n            {%- assign variants_list = variants_list | append: var_key | append: \",\" -%}\n            <option \n              value=\"{{ variant.id }}\" \n              data-color=\"{{ variant.options[0] | escape }}\" \n              data-price=\"{{ variant.price | money }}\"\n              data-raw-price=\"{{ variant.price }}\"\n              data-compare=\"{% if variant.compare_at_price > variant.price %}{{ variant.compare_at_price | money }}{% else %}none{% endif %}\"\n              data-raw-compare=\"{{ variant.compare_at_price | default: 0 }}\"\n              data-variant-image=\"{{ variant.featured_media | image_url: width: 1000 }}\"\n              {% if variant.id == current_product.selected_or_first_available_variant.id %}selected{% endif %}\n            >\n              {{ variant.options[1] | default: variant.title }} — {{ variant.price | money }}\n            <\/option>\n          {%- endunless -%}\n        {% endfor %}\n      <\/select>\n    <\/div>\n  <\/div>\n<\/div>\n\n<style>\n.v7-unique-variant-container { margin: 15px 0; max-width: 450px; }\n.v7-unique-label { font-weight: 800; margin-bottom: 8px; display: block; font-size: 13px; color: #333; }\n.v7-unique-swatch-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 15px; }\n.v7-unique-card-inner { border: 1px solid #eee; padding: 8px; border-radius: 12px; text-align: center; cursor: pointer; transition: 0.2s; border: 1.5px solid transparent; }\n.v7-unique-card input:checked + .v7-unique-card-inner { border-color: var(--v7-border); transform: scale(1.02); box-shadow: 0 4px 12px rgba(0,0,0,0.05); }\n.v7-unique-card img { width: 100%; aspect-ratio: 1.1; object-fit: cover; border-radius: 8px; }\n.v7-unique-title { font-size: 11px; font-weight: 900; margin: 5px 0 2px; text-transform: uppercase; }\n.v7-unique-pill { display: inline-block; background: #fff; padding: 2px 10px; border-radius: 20px; font-size: 10px; font-weight: 700; border: 1px solid #f0f0f0; }\n.v7-unique-select-wrapper { position: relative; width: 100%; }\n.v7-unique-dropdown {\n  width: 100%; padding: 12px 15px; background: #f4f7ff; border: 1.5px solid #dce4fa; border-radius: 10px;\n  font-weight: 700; font-size: 14px; appearance: none; -webkit-appearance: none; cursor: pointer;\n}\n.v7-unique-select-wrapper::after { content: '▼'; position: absolute; right: 15px; top: 50%; transform: translateY(-50%); font-size: 10px; pointer-events: none; }\n.v7-unique-variant-container .price-item { display: inline-block !important; visibility: visible !important; opacity: 1 !important; }\n<\/style>\n\n<script>\n(function() {\n  const container = document.querySelector('.v7-unique-variant-container');\n  if (!container) return;\n\n  const sizeSelect = container.querySelector('.v7-unique-dropdown');\n  const colorInputs = container.querySelectorAll('.v7-unique-color-input');\n\n  function updateGlobalUI(opt) {\n    if(!opt) return;\n\n    \/\/ 1. UPDATE IMAGE (FIXED)\n    const newImgUrl = opt.dataset.variantImage;\n    if (newImgUrl) {\n       \/\/ Search for common theme main image selectors\n       const mainImg = document.querySelector('.product__media img, .product__main-media img, .product-featured-img, #ProductPhotoImg');\n       if (mainImg) {\n         mainImg.src = newImgUrl;\n         mainImg.srcset = newImgUrl; \/\/ Ensures high-res screens update too\n       }\n    }\n\n    \/\/ 2. UPDATE PRICES\n    const priceStr = opt.dataset.price;\n    const compareStr = opt.dataset.compare;\n    const rawPrice = parseInt(opt.dataset.rawPrice);\n    const rawCompare = parseInt(opt.dataset.rawCompare);\n\n    document.querySelectorAll('.price-item--sale, .price-item--regular').forEach(el => {\n      el.textContent = priceStr;\n      el.style.setProperty('display', 'inline-block', 'important');\n    });\n\n    const compareElements = document.querySelectorAll('.price-item--regular[data-compare-price], s.price-item, .price__compare .price-item');\n    const saleBadge = document.querySelector('.badge--sale, .price__badge-sale, .discount-tag');\n\n    if (compareStr !== \"none\" && rawCompare > rawPrice) {\n      compareElements.forEach(el => {\n        el.textContent = compareStr;\n        el.style.setProperty('display', 'inline-block', 'important');\n      });\n      if (saleBadge) saleBadge.style.setProperty('display', 'inline-block', 'important');\n    } else {\n      compareElements.forEach(el => el.style.setProperty('display', 'none', 'important'));\n      if (saleBadge) saleBadge.style.setProperty('display', 'none', 'important');\n    }\n\n    \/\/ 3. SYNC SWATCH PILLS\n    const selectedSizeLabel = opt.text.split(' — ')[0].trim();\n    Array.from(sizeSelect.options).forEach(o => {\n      if (o.text.split(' — ')[0].trim() === selectedSizeLabel) {\n        const pill = container.querySelector(`[data-v7-swatch-color=\"${o.dataset.color}\"]`);\n        if (pill) pill.textContent = o.dataset.price;\n      }\n    });\n    \/\/ ===== UPDATE DISCOUNT PERCENT BADGE =====\nconst badge = document.querySelector('.price__badge-sale');\n\nif (badge && rawCompare > rawPrice && rawCompare > 0) {\n  const percent = Math.floor((rawCompare - rawPrice) * 100 \/ rawCompare);\n  badge.textContent = percent + '% OFF Today';\n  badge.style.display = 'inline-block';\n} else if (badge) {\n  badge.style.display = 'none';\n}\n  }\n\n  \n\n  sizeSelect.addEventListener('change', function() {\n    const opt = this.options[this.selectedIndex];\n    updateGlobalUI(opt);\n    \n    document.querySelectorAll('input[name=\"id\"]').forEach(i => { \n      i.value = opt.value; \n      i.dispatchEvent(new Event('change', {bubbles:true})); \n    });\n  });\n\n  colorInputs.forEach(input => {\n    input.addEventListener('change', function() {\n      const selectedColor = this.value;\n      const currentSizeLabel = sizeSelect.options[sizeSelect.selectedIndex].text.split(' — ')[0].trim();\n      sizeSelect.style.backgroundColor = this.dataset.bg;\n\n      let matchFound = false;\n      let firstAvailableForColor = null;\n\n      Array.from(sizeSelect.options).forEach(opt => {\n        if (opt.dataset.color === selectedColor) {\n          opt.disabled = false;\n          opt.style.display = 'block';\n          if (!firstAvailableForColor) firstAvailableForColor = opt;\n          if (opt.text.split(' — ')[0].trim() === currentSizeLabel) {\n            opt.selected = true;\n            matchFound = true;\n          }\n        } else {\n          opt.disabled = true;\n          opt.style.display = 'none';\n        }\n      });\n\n      if (!matchFound && firstAvailableForColor) {\n        firstAvailableForColor.selected = true;\n      }\n      sizeSelect.dispatchEvent(new Event('change'));\n    });\n  });\n\n  if (activeInput = container.querySelector('.v7-unique-color-input:checked')) {\n    activeInput.dispatchEvent(new Event('change'));\n  }\n})();\n<\/script>"
          }
        }
      }
    }
  }
}
